# Smart Image Cleaner (智能图片清理工具)

一个基于图像内容分析的智能照片整理工具，专为整理海量本地图库设计。

## 🌟 核心功能

### 1. � 重复图片检测 (Duplicate Detection)
- **原理**：使用 **感知哈希 (pHash)** 算法，而非简单的 MD5/文件大小比对。
- **效果**：能识别出分辨率不同、格式不同、甚至有细微差异的同一张图片。
- **智能选择**：自动从重复组中标记出“最佳图片”（基于分辨率、文件大小等），其余标记为“待删除”。

### 2. 🌫️ 模糊图片检测 (Blur Detection)
- **原理**：基于 **拉普拉斯方差 (Laplacian Variance)** 算法计算图片清晰度评分。
- **效果**：自动找出失焦、模糊的照片。
- **筛选**：按模糊程度排序，直观展示低质量图片，方便批量清理。

### 3. 🖥️ 现代化 Web 界面
- **流畅体验**：使用 **Vue.js** 构建的前端界面，支持平铺布局，轻松浏览上万张图片。
- **即时反馈**：扫描进度实时显示，操作结果立即生效。
- **安全删除**：所有删除操作需二次确认，防止误删。

## 🛠️ 安装与运行

### 1. 环境要求
- Python 3.8 或更高版本

### 2. 安装依赖库
在终端或命令行中运行以下命令安装所需库：

```bash
pip install flask Pillow imagehash opencv-python numpy
```

### 3. 启动程序
在项目根目录下运行：

```bash
python 图片去重.py
```

程序启动后会自动打开默认浏览器，访问 `http://127.0.0.1:5000`。

## 📖 使用指南

1.  **选择文件夹**：点击“选择文件夹”按钮或输入本地图片目录路径。
2.  **选择扫描模式**：
    - **查找重复图片**：找出相似的图片组。
    - **查找模糊图片**：找出清晰度低的图片。
3.  **开始扫描**：点击“开始扫描”，等待进度条完成。
    - *提示：首次扫描可能较慢，结果会自动缓存，再次打开秒级加载。*
4.  **结果处理**：
    - **重复模式**：保留最佳图片（绿色标记），勾选多余图片（红色标记）。
    - **模糊模式**：查看模糊度评分，勾选不需要的废片。
5.  **批量删除**：确认无误后，点击底部的“删除选中”按钮永久删除文件。

## ⚙️ 技术栈

- **后端**：Python, Flask
- **图像处理**：OpenCV, Pillow, ImageHash
- **前端**：Vue.js (CDN), HTML5/CSS3
- **并发**：Multiprocessing (多进程加速扫描)

## ⚠️ 注意事项

- **删除不可恢复**：本工具执行的是物理删除操作，请在删除前仔细核对。
- **缓存机制**：扫描结果会保存在同目录下的 `scan_cache.json` 中，如需强制重新扫描，可手动删除该文件。

---
*Developed for efficient photo organization.*
